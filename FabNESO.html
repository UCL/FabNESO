<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FabNESO package &mdash; FabNESO 0.1.dev1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=6aee1ebc"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="FabNESO.ensemble_tools module" href="FabNESO.ensemble_tools.html" />
    <link rel="prev" title="Welcome to FabNESO’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            FabNESO
          </a>
              <div class="version">
                0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">FabNESO package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#FabNESO.neso"><code class="docutils literal notranslate"><span class="pre">neso()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#FabNESO.neso_ensemble"><code class="docutils literal notranslate"><span class="pre">neso_ensemble()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#FabNESO.neso_vbmc"><code class="docutils literal notranslate"><span class="pre">neso_vbmc()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#FabNESO.neso_write_field"><code class="docutils literal notranslate"><span class="pre">neso_write_field()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#FabNESO.neso_pce_ensemble"><code class="docutils literal notranslate"><span class="pre">neso_pce_ensemble()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#FabNESO.neso_pce_analysis"><code class="docutils literal notranslate"><span class="pre">neso_pce_analysis()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="FabNESO.ensemble_tools.html">FabNESO.ensemble_tools module</a></li>
<li class="toctree-l3"><a class="reference internal" href="FabNESO.make_sweep_dir.html">FabNESO.make_sweep_dir module</a></li>
<li class="toctree-l3"><a class="reference internal" href="FabNESO.read_outputs.html">FabNESO.read_outputs module</a></li>
<li class="toctree-l3"><a class="reference internal" href="FabNESO.tasks.html">FabNESO.tasks module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">FabNESO</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">FabNESO package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/FabNESO.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-FabNESO">
<span id="fabneso-package"></span><h1>FabNESO package<a class="headerlink" href="#module-FabNESO" title="Link to this heading"></a></h1>
<p>Neptune Exploratory SOftware (NESO) plugin for FabSim3.</p>
<dl class="py function">
<dt class="sig sig-object py" id="FabNESO.neso">
<span class="sig-prename descclassname"><span class="pre">FabNESO.</span></span><span class="sig-name descname"><span class="pre">neso</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Electrostatic2D3V'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conditions_file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'conditions.xml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mesh_file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mesh.xml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpus_per_process</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wall_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'00:15:00'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_missing_parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">parameter_overrides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/FabNESO/tasks.html#neso"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FabNESO.neso" title="Link to this definition"></a></dt>
<dd><p>Run a single NESO solver instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> – Directory with single run configuration information.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>solver</strong> – Which NESO solver to use.</p></li>
<li><p><strong>conditions_file_name</strong> – Name of conditions XML file in configuration directory.</p></li>
<li><p><strong>mesh_file_name</strong> – Name of mesh XML in configuration directory.</p></li>
<li><p><strong>processes</strong> – Number of processes to run.</p></li>
<li><p><strong>nodes</strong> – Number of nodes to run on. Only applicable when running on a multi-node
system.</p></li>
<li><p><strong>cpus_per_process</strong> – Number of processing units to use per process. Only
applicable when running on a multi-node system.</p></li>
<li><p><strong>wall_time</strong> – Maximum time to allow job to run for. Only applicable when submitting
to a job scheduler.</p></li>
<li><p><strong>create_missing_parameters</strong> – Force parameters in <code class="docutils literal notranslate"><span class="pre">parameter_overrides</span></code> missing
from conditions file to be added.</p></li>
<li><p><strong>**parameter_overrides</strong> – Additional keyword arguments will be passed to
<code class="docutils literal notranslate"><span class="pre">FabNESO.ensemble_tools.edit_parameters</span></code> to create a temporary conditions
file with these parameter vaues overriden.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FabNESO.neso_ensemble">
<span class="sig-prename descclassname"><span class="pre">FabNESO.</span></span><span class="sig-name descname"><span class="pre">neso_ensemble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Electrostatic2D3V'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conditions_file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'conditions.xml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mesh_file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mesh.xml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpus_per_process</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wall_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'00:15:00'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">parameter_scans</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/FabNESO/tasks.html#neso_ensemble"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FabNESO.neso_ensemble" title="Link to this definition"></a></dt>
<dd><p>Run ensemble of NESO solver instances.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> – Directory with ensemble configuration information.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>solver</strong> – Which NESO solver to use.</p></li>
<li><p><strong>conditions_file_name</strong> – Name of conditions XML file in configuration directory.</p></li>
<li><p><strong>mesh_file_name</strong> – Name of mesh XML in configuration directory.</p></li>
<li><p><strong>processes</strong> – Number of processes to run in each job in the ensemble.</p></li>
<li><p><strong>nodes</strong> – Number of nodes to run each job in ensemble on. Only applicable when
running on a multi-node system.</p></li>
<li><p><strong>cpus_per_process</strong> – Number of processing units to use per process for each job in
ensemble. Only applicable when running on a multi-node system.</p></li>
<li><p><strong>wall_time</strong> – Maximum time to allow each job in ensemble to run for. Only
applicable when submitting to a job scheduler.</p></li>
<li><p><strong>**parameter_scans</strong> – The set of parameters to sweep over. A colon separated list
of lower bound, upper bound, and steps.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FabNESO.neso_vbmc">
<span class="sig-prename descclassname"><span class="pre">FabNESO.</span></span><span class="sig-name descname"><span class="pre">neso_vbmc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_field_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Electrostatic2D3V'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conditions_file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'conditions.xml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mesh_file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mesh.xml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observation_noise_std</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpus_per_process</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wall_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'00:15:00'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_directory_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">vbmc_parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/FabNESO/tasks.html#neso_vbmc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FabNESO.neso_vbmc" title="Link to this definition"></a></dt>
<dd><p>Run variational Bayesian Monte Carlo (VBMC) to calibrate NESO solver parameters.</p>
<p>The VBMC algorithm (Acerbi, 2018) is an approximate Bayesian inference method for
efficient parameter calibration in expensive to simulate models. Here we use the
Python implementation of the algorithm in the package PyVBMC (Huggins et al., 2023).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – Directory with ensemble configuration information.</p></li>
<li><p><strong>reference_field_file</strong> – Name of a NumPy .txt file that holds a reference
field measurement for the calibration run.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>solver</strong> – Which NESO solver to use.</p></li>
<li><p><strong>conditions_file_name</strong> – Name of conditions XML file in configuration directory.</p></li>
<li><p><strong>mesh_file_name</strong> – Name of mesh XML in configuration directory.</p></li>
<li><p><strong>observation_noise_std</strong> – Standard deviation of the observed noise, used for log
likelihood calculation.</p></li>
<li><p><strong>processes</strong> – Number of processes to run in each job in the ensemble.</p></li>
<li><p><strong>nodes</strong> – Number of nodes to run on. Only applicable when running on a multi-node
system.</p></li>
<li><p><strong>cpus_per_process</strong> – Number of processing units to use per process. Only
applicable when running on a multi-node system.</p></li>
<li><p><strong>wall_time</strong> – Maximum time to allow job to run for. Only applicable when submitting
to a job scheduler.</p></li>
<li><p><strong>**vbmc_parameters</strong> – The parameters to be scanned in the VBMC instance. The value
is a colon separated list: lower bound: upper bound: plausible lower bound
: plausible upper bound</p></li>
</ul>
</dd>
</dl>
<p class="rubric">References</p>
<ol class="arabic simple">
<li><p>Acerbi, L. (2018). Variational Bayesian Monte Carlo.
Advances in Neural Information Processing Systems, 31.</p></li>
<li><p>Huggins et al., (2023). PyVBMC: Efficient Bayesian inference in Python.
Journal of Open Source Software, 8(86), 5428,
<a class="reference external" href="https://doi.org/10.21105/joss.05428">https://doi.org/10.21105/joss.05428</a></p></li>
</ol>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FabNESO.neso_write_field">
<span class="sig-prename descclassname"><span class="pre">FabNESO.</span></span><span class="sig-name descname"><span class="pre">neso_write_field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Electrostatic2D3V'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conditions_file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'conditions.xml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mesh_file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mesh.xml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpus_per_process</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wall_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'00:15:00'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'field_write_out.txt'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">parameter_overrides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/FabNESO/tasks.html#neso_write_field"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FabNESO.neso_write_field" title="Link to this definition"></a></dt>
<dd><p>Run a single NESO solver instance and save the observed field to a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> – Directory with single run configuration information.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>solver</strong> – Which NESO solver to use.</p></li>
<li><p><strong>conditions_file_name</strong> – Name of conditions XML file in configuration directory.</p></li>
<li><p><strong>mesh_file_name</strong> – Name of mesh XML in configuration directory.</p></li>
<li><p><strong>processes</strong> – Number of processes to run.</p></li>
<li><p><strong>nodes</strong> – Number of nodes to run on. Only applicable when running on a multi-node
system.</p></li>
<li><p><strong>cpus_per_process</strong> – Number of processing units to use per process. Only
applicable when running on a multi-node system.</p></li>
<li><p><strong>wall_time</strong> – Maximum time to allow job to run for. Only applicable when submitting
to a job scheduler.</p></li>
<li><p><strong>out_file_name</strong> – Name of the file to be created containing the measured field</p></li>
<li><p><strong>**parameter_overrides</strong> – Additional keyword arguments will be passed to
<code class="docutils literal notranslate"><span class="pre">FabNESO.ensemble_tools.edit_parameters</span></code> to create a temporary conditions
file with these parameter vaues overriden.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FabNESO.neso_pce_ensemble">
<span class="sig-prename descclassname"><span class="pre">FabNESO.</span></span><span class="sig-name descname"><span class="pre">neso_pce_ensemble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Electrostatic2D3V'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conditions_file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'conditions.xml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mesh_file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mesh.xml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polynomial_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variant</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'pseudo-spectral'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'pseudo-spectral-sparse'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'point-collocation'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'pseudo-spectral'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpus_per_process</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wall_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'00:15:00'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">parameter_bounds_or_overrides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/FabNESO/tasks.html#neso_pce_ensemble"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FabNESO.neso_pce_ensemble" title="Link to this definition"></a></dt>
<dd><p>Run ensemble of NESO simulations to perform a polynomial chaos expansion of outputs.</p>
<p>Generates a set of parameters values (and associated weights) to evaluate model at
using a quadrature rule, and evaluates model outputs at each of these parameter
values. The model outputs can then be approximated by an expansion in a set of
orthogonal (with respect to the assumed distribution over the parameter space)
polynomials, with the coefficients of the expansion estimated from the sampled
model outputs. This task just computes the model outputs for the sampled parameter
values, with the separate <cite>neso_pce_analysis</cite> task using the fetched model outputs
from this task to estimate the coefficients and so form the polynomial expansion
approximation to the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> – Directory with ensemble configuration information.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>solver</strong> – Which NESO solver to use.</p></li>
<li><p><strong>conditions_file_name</strong> – Name of conditions XML file in configuration directory.</p></li>
<li><p><strong>mesh_file_name</strong> – Name of mesh XML in configuration directory.</p></li>
<li><p><strong>polynomial_order</strong> – Polynomial order to use in polynomial chaos expansion.</p></li>
<li><p><strong>variant</strong> – Polynomial chaos expansion variant to use - one of <cite>point-collocation</cite>
(point-collocation method), <cite>pseudo-spectral</cite> (pseudo-spectral projection
method) or <cite>pseudo-spectral-sparse</cite> (pseudo-spectral projection method with
Smolyak sparse grid).</p></li>
<li><p><strong>processes</strong> – Number of processes to run in each job in the ensemble.</p></li>
<li><p><strong>nodes</strong> – Number of nodes to run on. Only applicable when running on a multi-node
system.</p></li>
<li><p><strong>cpus_per_process</strong> – Number of processing units to use per process. Only
applicable when running on a multi-node system.</p></li>
<li><p><strong>wall_time</strong> – Maximum time to allow job to run for. Only applicable when submitting
to a job scheduler.</p></li>
<li><p><strong>**parameter_bounds_or_overrides</strong> – Bounds of parameters to vary in polynomial
chaos expansion or fixed overrides for parameters from values in conditions
file in configuration directory. Each value is either a colon-separated
string <cite>lower_bound:upper_bound</cite> specifying lower and upper bounds for
independent uniform distributions over parameter values, or a string
specifying a single int or float, in which case the corresponding parameter
is considered fixed but the value given is used to override its default
value in the conditions file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FabNESO.neso_pce_analysis">
<span class="sig-prename descclassname"><span class="pre">FabNESO.</span></span><span class="sig-name descname"><span class="pre">neso_pce_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extract_outputs_script</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'extract_outputs.py'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/FabNESO/tasks.html#neso_pce_analysis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FabNESO.neso_pce_analysis" title="Link to this definition"></a></dt>
<dd><p>Analyse outputs from a previous polynomial chaos expansion (PCE) ensemble run.</p>
<p>Uses run outputs for sampled parameter values to compute a PCE approximation to
model, and uses this to compute various statistics of output and allowing
construction of a surrogate model. The analysis results are saved to a pickle file
<cite>pce_analysis_results.pickle</cite> in the results directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – Name of configuration directory with script to use to extract relevant
solver outputs from results files and output to a JSON file.</p></li>
<li><p><strong>results_dir</strong> – Directory containing PCE ensemble outputs from a run of <cite>neso_pce</cite>
task. The analysis results pickle file will be written to this directory.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>extract_outputs_script</strong> – Name of script for extracting outputs from results
files in configuration directory.</p>
</dd>
</dl>
</dd></dl>

<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="FabNESO.ensemble_tools.html">FabNESO.ensemble_tools module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.ensemble_tools.html#FabNESO.ensemble_tools.create_dir_tree"><code class="docutils literal notranslate"><span class="pre">create_dir_tree()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.ensemble_tools.html#FabNESO.ensemble_tools.calculate_parameter_value"><code class="docutils literal notranslate"><span class="pre">calculate_parameter_value()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.ensemble_tools.html#FabNESO.ensemble_tools.indices_iterator"><code class="docutils literal notranslate"><span class="pre">indices_iterator()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.ensemble_tools.html#FabNESO.ensemble_tools.create_dict_sweep"><code class="docutils literal notranslate"><span class="pre">create_dict_sweep()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.ensemble_tools.html#FabNESO.ensemble_tools.return_directory_name"><code class="docutils literal notranslate"><span class="pre">return_directory_name()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.ensemble_tools.html#FabNESO.ensemble_tools.list_parameter_values"><code class="docutils literal notranslate"><span class="pre">list_parameter_values()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.ensemble_tools.html#FabNESO.ensemble_tools.edit_parameters"><code class="docutils literal notranslate"><span class="pre">edit_parameters()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="FabNESO.make_sweep_dir.html">FabNESO.make_sweep_dir module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.make_sweep_dir.html#FabNESO.make_sweep_dir.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="FabNESO.read_outputs.html">FabNESO.read_outputs module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.read_outputs.html#FabNESO.read_outputs.read_hdf5_datasets"><code class="docutils literal notranslate"><span class="pre">read_hdf5_datasets()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="FabNESO.tasks.html">FabNESO.tasks module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.tasks.html#FabNESO.tasks.neso"><code class="docutils literal notranslate"><span class="pre">neso()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.tasks.html#FabNESO.tasks.neso_ensemble"><code class="docutils literal notranslate"><span class="pre">neso_ensemble()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.tasks.html#FabNESO.tasks.neso_vbmc"><code class="docutils literal notranslate"><span class="pre">neso_vbmc()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.tasks.html#FabNESO.tasks.neso_write_field"><code class="docutils literal notranslate"><span class="pre">neso_write_field()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.tasks.html#FabNESO.tasks.run_instance_return_field"><code class="docutils literal notranslate"><span class="pre">run_instance_return_field()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.tasks.html#FabNESO.tasks.log_density"><code class="docutils literal notranslate"><span class="pre">log_density()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.tasks.html#FabNESO.tasks.neso_pce_ensemble"><code class="docutils literal notranslate"><span class="pre">neso_pce_ensemble()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="FabNESO.tasks.html#FabNESO.tasks.neso_pce_analysis"><code class="docutils literal notranslate"><span class="pre">neso_pce_analysis()</span></code></a></li>
</ul>
</li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to FabNESO’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="FabNESO.ensemble_tools.html" class="btn btn-neutral float-right" title="FabNESO.ensemble_tools module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, University College London.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>